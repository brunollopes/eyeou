<!-- GALLERY LIST START -->
<app-navbar fixed="false" bgColor="true"></app-navbar>

<div class="container">

  <div class="loader" *ngIf="!contest">
    <mat-spinner style="margin: 50px auto"></mat-spinner>
  </div>

  <main *ngIf="contest">
    <div class="contest-info">
      <div class="col-md-4 col-xs-12 contest-image">
        <img [src]="contest.bgprofile_image" alt="Contest Display Picture">
      </div>
      <div class="col-md-8 col-xs-12 contest-status">
        <h2>{{contest.contest_name}}</h2>
        <div>
          <mat-icon matTooltip="Remaining Time">access_time</mat-icon>
          <span>6 Days 12 Hours</span>
        </div>
        <div>
          <mat-icon matTooltip="Your Photos">insert_photo</mat-icon>
          <span>{{contest.users[0].images.length}} Photos</span>
        </div>
        <div>
          <mat-icon matTooltip="Prize Money">attach_money</mat-icon>
          <span>{{contest.prize_money}} $</span>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

    <div class="center image-upload" style="margin-top: 25px">
      <h3>UPLOAD NEW IMAGES</h3>
      <div class="alert alert-danger" *ngIf="maxLimitReached">
        You can't upload more the 10 photos.
      </div>
      <file-drop headertext="Drop files here" (onFileDrop)="dropped($event)">
      </file-drop>
      <div class="upload-table">
        <table class="table" *ngIf="previewFiles.length">
          <thead>
            <tr>
              <th>Name</th>
              <th>Size</th>
              <th>Last Modified</th>
              <th>Type</th>
              <th>Remove</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody class="upload-name-style">
            <tr *ngFor="let item of previewFiles; let i = index">
              <td>
                <strong>{{ item.name }}</strong>
              </td>
              <td>
                <strong>{{ item.size | converSize }}</strong>
              </td>
              <td>
                <strong>{{ item.lastModifiedDate | date: 'medium' }}</strong>
              </td>
              <td>
                <strong>{{ item.type }}</strong>
              </td>
              <td>
                <button mat-icon-button style="top: -10px" (click)="removeDropped(i)" [disabled]="item.status != 'Added'">
                  <mat-icon style="color: #F00">delete</mat-icon>
                </button>
              </td>
              <td>
                {{ item.status }}
              </td>
            </tr>
          </tbody>
        </table>
        <div class="text-center">
          <button mat-button style="background-color: #41C253; font-weight: bold; color: #FFF" (click)="uploadImages()" [disabled]="maxLimitReached">UPLOAD</button>
        </div>
      </div>
    </div>

    <div class="aws-images">
      <h3>YOUR IMAGES</h3>
      <div *ngIf="contest.users[0].images.length">
        <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" *ngFor="let image of contest.users[0].images" style="margin: 10px 0">
          <img [src]="image.image_path" alt="Contest Image" style="width: 100%">
        </div>
      </div>
      <div class="alert alert-info" *ngIf="!contest.users[0].images.length">
        You haven't uploaded any images to this contest yet.
        <br> You can upload up to 10 photos from the form above.
      </div>
    </div>
  </main>

</div>